{% from 'bootstrap/nav.html' import render_nav_item %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    {% block head %}
        <title>{% block title %}{% endblock %} - Albumy</title>
        <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
        {% block styles %}
		<link rel="icon" href="{{ url_for('static', filename='/static/assets/images/favicon.png') }}">
		
		<!-- CSS 
		================================================== -->
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/style.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/uikit.css') }}">
		
		<!-- icons
		================================================== -->
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/icons.css') }}">
		<script src="https://kit.fontawesome.com/815e388c50.js" crossorigin="anonymous"></script>
		
		<!-- Google font
		================================================== -->
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
		
		
		
            <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
            <link rel="stylesheet" href="{{ url_for('static', filename='open-iconic/font/css/open-iconic-bootstrap.css') }}">
            <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        {% endblock styles %}
    {% endblock head %}
</head>

<body>
	<div id="wrapper">
	
	    <!-- sidebar -->
	   <div class="main_sidebar">
	       <div class="side-overlay" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></div>
	   
	       <!-- sidebar header -->
	       <div class="sidebar-header">
	           <!-- Logo-->
	           <div id="logo">
	               <a href="feeds.html"> <img src="/static/assets/images/logo-light.png" alt=""></a>
	           </div>
	           <span class="btn-close" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></span>
	       </div>
	   
	       <!-- sidebar Menu -->
	       <div class="sidebar">
	           <div class="sidebar_innr" data-simplebar>
	   
	               <div class="sections">
	                   <ul>
						   <li class="active">
						       <a href="{{ url_for('main.upload') }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#047cac" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"></path>
						           </svg>
						           Upload </a>
						   </li>
	                       <li>
	                           <a href="{{ url_for('main.index') }}">
	                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	                                   <path fill="#047cac" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"></path>
	                               </svg>
	                               News Feed </a>
	                       </li>
						   
	                       <li>
	                           <a href="{{ url_for('user.index', username=current_user.username) }}">
	                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	                                   <path fill="#8bc34a"
	                                       d="M22,16V4A2,2 0 0,0 20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16M11,12L13.03,14.71L16,11L20,16H8M2,6V20A2,2 0 0,0 4,22H18V20H4V6">
	                                   </path>
	                               </svg> My Photos </a>
	                       </li>
	                       <li>
	                           <a href="{{ url_for('user.show_collections', username=current_user.username) }}">
	                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	                                   <path fill="#009688"
	                                       d="M21,9A1,1 0 0,1 22,10A1,1 0 0,1 21,11H16.53L16.4,12.21L14.2,17.15C14,17.65 13.47,18 12.86,18H8.5C7.7,18 7,17.27 7,16.5V10C7,9.61 7.16,9.26 7.43,9L11.63,4.1L12.4,4.84C12.6,5.03 12.72,5.29 12.72,5.58L12.69,5.8L11,9H21M2,18V10H5V18H2Z">
	                                   </path>
	                               </svg> My Collections </a>
	                       </li>
						   <li>
						       <a href="{{ url_for('main.explore') }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#f25e4e"
						                   d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z">
						               </path>
						           </svg> Explore </a>
						   </li>
						   <li>
						       <a href="{{ url_for('user.index', username=current_user.username) }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#8BC34A"
						                   d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,10.9A1.1,1.1 0 0,0 10.9,12A1.1,1.1 0 0,0 12,13.1A1.1,1.1 0 0,0 13.1,12A1.1,1.1 0 0,0 12,10.9Z">
						               </path>
						           </svg>  My Home </a>
						   </li>
						   <li>
						       <a href="{{ url_for('user.edit_profile') }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#4caf50"
						                   d="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z">
						               </path>
						           </svg> Settings </a>
						   </li>
						   
						   <li>
						       <a href="{{ url_for('admin.index') }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#8BC34A"
						                   d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,10.9A1.1,1.1 0 0,0 10.9,12A1.1,1.1 0 0,0 12,13.1A1.1,1.1 0 0,0 13.1,12A1.1,1.1 0 0,0 12,10.9Z">
						               </path>
						           </svg>Admin Dashboard</a>
						   </li>
						   
					
	                       
	                       
	                      
	                       <li id="more-veiw" hidden="">
	                           <a href="{{ url_for('user.show_following', username=current_user.username) }}">
	                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	                                   <path fill="#b2c17c"
	                                       d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z">
	                                   </path>
	                               </svg> My followings </a>
	                       </li>
						   
						   <li id="more-veiw" hidden="">
						       <a href="{{ url_for('user.show_followers', username=current_user.username) }}">
						           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
						               <path fill="#b2c17c"
						                   d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z">
						               </path>
						           </svg> My followers </a>
						   </li>
	                       
	                   </ul>
	                   <a href="#" class="button secondary px-5 btn-more"
	                       uk-toggle="target: #more-veiw; animation: uk-animation-fade">
	                       <span id="more-veiw">See More <i class="icon-feather-chevron-down ml-2"></i></span>
	                       <span id="more-veiw" hidden>See Less<i class="icon-feather-chevron-up ml-2"></i> </span>
	                   </a>
	               </div>
	   
	               <div class="sections">
	                   <h3> Tags </h3>
	                   <ul>
	                       {% for tag in tags %}
	                           
	                       							  <li>
	                       							      <a href="{{ url_for('.show_tag', tag_id=tag.id) }}">
	                       							          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
	                       							              <path fill="#e91e63"
	                       							                  d="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z">
	                       							              </path>
	                       							          </svg>{{ tag.name }} {{ tag.photos|length }} </a>
	                       							  </li>
	                       {% endfor %}
	                       
	                   </ul>
	   
	               </div>
	   
	               <!--  Optional Footer -->
	               <div id="foot">
	   
	                   <ul>
	                       <li> <a href="page-term.html"> About Us </a></li>
	                       <li> <a href="page-setting.html"> Setting </a></li>
	                       <li> <a href="page-privacy.html"> Privacy Policy </a></li>
	                       <li> <a href="page-term.html"> Terms - Conditions </a></li>
	                   </ul>
	   
	   
	                   <div class="foot-content">
	                       <p>Copyright &copy; 2022.Hang Sun All rights reserved.</p>
	                   </div>
	   
	               </div>
	   
	   
	   
	           </div>
	   
	   
	       </div>
	   
	   </div>
	</div>
	
	<!-- contents -->
	<div class="main_content">
	
	     <!-- header -->
	<div id="main_header">
	    <header>
	        <div class="header-innr">
	
	            <!-- Logo-->
	            <div class="header-btn-traiger is-hidden" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible">
	                <span></span></div>
	
	             <!-- Logo-->
	             <div id="logo">
	                <a href="feeds.html"> <img src="/static/assets/images/logo.png" alt=""></a>
	                <a href="feeds.html"> <img src="/static/assets/images/logo-light.png" class="logo-inverse"
	                        alt=""></a>
	            </div>
				
				
	
	            <!-- form search-->
	            <div class="head_search">
					
	                <form action="{{ url_for('main.search') }}">
	                    <div class="head_search_cont">
	                        <input type="text" name="q" class="form-control" placeholder="Photo, tag or user"
	                               required>
	                        <i class="s_icon uil-search-alt" ></i>
	                    </div>
	
	                    <!-- Search box dropdown -->
	                    <div uk-dropdown="pos: top;mode:click;animation: uk-animation-slide-bottom-small"
	                        class="dropdown-search display-hidden">
	                        <!-- User menu -->
	
	                        <ul class="dropdown-search-list">
	                            <li class="list-title"> Recent Searches </li>
	                            <li> <a href="#">
	                                    <img src="/static/assets/images/avatars/avatar-2.jpg" alt="">
	                                    <p> Erica Jones <span> 2 hours ago </span> </p>
	                                </a>
	                            </li>
	                            <li> <a href="#">
	                                    <img src="/static/assets/images/avatars/avatar-3.jpg" alt="">
	                                    <p> Adrian Mohani <span> 13 days ago </span> </p>
	                                </a>
	                            </li>
	                            <li> <a href="#">
	                                    <img src="/static/assets/images/avatars/avatar-4.jpg" alt="">
	                                    <p> Mountain Riders <span> 3 days ago <span>Group</span> </span> </p>
	                                </a>
	                            </li>
	                            <li> <a href="#">
	                                    <img src="/static/assets/images/avatars/avatar-5.jpg" alt="">
	                                    <p> Coffee Addicts <span> 12 days ago <span> Page</span></span> </p>
	                                </a>
	                            </li>
	                            <li class="menu-divider"></li>
	                            <li class="list-footer"> <a href="your-history.html"> Searches History </a>
	                            </li>
	                        </ul>
	
	                    </div>
	
	
	                </form>
	            </div>
	
	            <!-- user icons -->
	            <div class="head_user">
	
	
	                
	
					{% if current_user.is_authenticated %}
					    <a class="nav-item nav-link" href="{{ url_for('main.show_notifications', filter='unread') }}">
					        <span class="oi oi-bell"></span>
					        <span id="notification-badge"
					              class="{% if notification_count == 0 %}hide{% endif %} badge badge-danger badge-notification"
					              data-href="{{ url_for('ajax.notifications_count') }}">{{ notification_count }}</span>
					    </a>
					    <a class="nav-item nav-link" href="{{ url_for('main.upload') }}" title="Upload">
					        <span class="oi oi-cloud-upload"></span>&nbsp;&nbsp;
					    </a>
					    <div class="dropdown nav-item">
					        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button"
					           aria-expanded="false">
					            <img class="avatar-xs"
					                 src="{{ url_for('main.get_avatar', filename=current_user.avatar_s) }}">
					        </a>
					        <div class="dropdown-menu dropdown-menu-right" role="menu">
					            <h6 class="dropdown-header">{{ current_user.username }}</h6>
					            <a class="dropdown-item" href="{{ url_for('user.index', username=current_user.username) }}">
					                <span class="oi oi-person"></span> My Home
					            </a>
					            <div class="dropdown-divider"></div>
					            <a class="dropdown-item" href="{{ url_for('user.edit_profile') }}">
					                <span class="oi oi-cog"></span> Settings
					            </a>
					            {% if current_user.can('MODERATE') %}
					                <a class="dropdown-item" href="{{ url_for('admin.index') }}">
					                    <span class="oi oi-dashboard"></span> Dashboard
					                </a>
					            {% endif %}
					            <a class="dropdown-item" href="{{ url_for('auth.logout') }}">
					                <span class="oi oi-power-standby"></span> Logout
					            </a>
					        </div>
					    </div>
					{% else %}
					    <a class="btn btn-outline-primary" href="{{ url_for('auth.login') }}">Login</a>&nbsp;&nbsp;
					    <a class="btn btn-primary" href="{{ url_for('auth.register') }}">Join Albumy</a>
					{% endif %}
	
	                
	
	
	
	
	            </div>
	
	        </div> <!-- / heaader-innr -->
	    </header>
	
	</div>
	
{% block navbar %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('main.index') }}">
                <img src="{{ url_for('static', filename='favicon.ico') }}" alt="Albumy">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01"
                    aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarColor01">
                <div class="navbar-nav mr-auto">
                    {{ render_nav_item('main.index', 'Home') }}
                    {{ render_nav_item('main.explore', 'Explore') }}
                    
                </div>
            </div>
        </div>
    </nav>
{% endblock %}

<main>
    <div class="container">
        {% for message in get_flashed_messages(with_categories=True) %}
            <div class="alert alert-{{ message[0] }}">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message[1] }}
            </div>
        {% endfor %}
        {% block content %}{% endblock %}
        {% block footer %}
            <footer>
                <p class="float-left">
                    <small>&copy; 2022
                        <a>Hang Sun</a> -
                        <a >SWJTU</a> -
                        <a>UoL</a>
                    </small>
                </p>
                <p class="float-right">
                    <small>Capture and share every wonderful moment.</small>
                </p>
            </footer>
        {% endblock %}
    </div>
</main>
<div id="toast"></div>

{% block scripts %}
<!-- javaScripts
    ================================================== -->
    <script src="{{ url_for('static', filename='assets/js/uikit.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/jquery-3.3.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/simplebar.js') }}"></script>
	
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    {{ moment.include_moment(local_js=url_for('static', filename='js/moment-with-locales.min.js')) }}
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script type="text/javascript">
        var csrf_token = "{{ csrf_token() }}";
        {% if current_user.is_authenticated %}
            var is_authenticated = true;
        {% else %}
            var is_authenticated = false;
        {% endif %}
    </script>
{% endblock %}
</body>
</html>